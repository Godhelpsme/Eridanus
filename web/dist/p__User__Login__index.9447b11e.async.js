"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[366],{42110:function(Y,E){var e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"};E.Z=e},1485:function(Y,E,e){e.r(E),e.d(E,{default:function(){return Be}});var J=e(15009),y=e.n(J),Q=e(97857),P=e.n(Q),q=e(99289),I=e.n(q),_=e(5574),O=e.n(_),B=e(2618),ee=e(17788),N=e(87547),f=e(67294),te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},ne=te,re=e(57079);function L(){return L=Object.assign?Object.assign.bind():function(r){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(r[c]=s[c])}return r},L.apply(this,arguments)}const ae=(r,a)=>f.createElement(re.Z,L({},r,{ref:a,icon:ne}));var ue=f.forwardRef(ae),l=e(1413),U=e(91),se=e(89451),oe=e(21532),ie=e(93967),le=e.n(ie),ce=e(34994),k=e(4942),de=e(64847),he=function(a){return(0,k.Z)((0,k.Z)({},a.componentCls,{"&-container":{display:"flex",flex:"1",flexDirection:"column",height:"100%",paddingInline:32,paddingBlock:24,overflow:"auto",background:"inherit"},"&-top":{textAlign:"center"},"&-header":{display:"flex",alignItems:"center",justifyContent:"center",height:"44px",lineHeight:"44px",a:{textDecoration:"none"}},"&-title":{position:"relative",insetBlockStart:"2px",color:"@heading-color",fontWeight:"600",fontSize:"33px"},"&-logo":{width:"44px",height:"44px",marginInlineEnd:"16px",verticalAlign:"top",img:{width:"100%"}},"&-desc":{marginBlockStart:"12px",marginBlockEnd:"40px",color:a.colorTextSecondary,fontSize:a.fontSize},"&-main":{minWidth:"328px",maxWidth:"580px",margin:"0 auto","&-other":{marginBlockStart:"24px",lineHeight:"22px",textAlign:"start"}}}),"@media (min-width: @screen-md-min)",(0,k.Z)({},"".concat(a.componentCls,"-container"),{paddingInline:0,paddingBlockStart:32,paddingBlockEnd:24,backgroundRepeat:"no-repeat",backgroundPosition:"center 110px",backgroundSize:"100%"}))};function ve(r){return(0,de.Xj)("LoginForm",function(a){var s=(0,l.Z)((0,l.Z)({},a),{},{componentCls:".".concat(r)});return[he(s)]})}var t=e(85893),fe=["logo","message","contentStyle","title","subTitle","actions","children","containerStyle","otherStyle"];function me(r){var a,s=r.logo,c=r.message,S=r.contentStyle,g=r.title,p=r.subTitle,j=r.actions,K=r.children,X=r.containerStyle,z=r.otherStyle,d=(0,U.Z)(r,fe),T=(0,se.YB)(),b=d.submitter===!1?!1:(0,l.Z)((0,l.Z)({searchConfig:{submitText:T.getMessage("loginForm.submitText","\u767B\u5F55")}},d.submitter),{},{submitButtonProps:(0,l.Z)({size:"large",style:{width:"100%"}},(a=d.submitter)===null||a===void 0?void 0:a.submitButtonProps),render:function(u,x){var m,w=x.pop();if(typeof(d==null||(m=d.submitter)===null||m===void 0?void 0:m.render)=="function"){var n,C;return d==null||(n=d.submitter)===null||n===void 0||(C=n.render)===null||C===void 0?void 0:C.call(n,u,x)}return w}}),R=(0,f.useContext)(oe.ZP.ConfigContext),F=R.getPrefixCls("pro-form-login"),D=ve(F),M=D.wrapSSR,h=D.hashId,o=function(u){return"".concat(F,"-").concat(u," ").concat(h)},i=(0,f.useMemo)(function(){return s?typeof s=="string"?(0,t.jsx)("img",{src:s}):s:null},[s]);return M((0,t.jsxs)("div",{className:le()(o("container"),h),style:X,children:[(0,t.jsxs)("div",{className:"".concat(o("top")," ").concat(h).trim(),children:[g||i?(0,t.jsxs)("div",{className:"".concat(o("header")),children:[i?(0,t.jsx)("span",{className:o("logo"),children:i}):null,g?(0,t.jsx)("span",{className:o("title"),children:g}):null]}):null,p?(0,t.jsx)("div",{className:o("desc"),children:p}):null]}),(0,t.jsxs)("div",{className:o("main"),style:(0,l.Z)({width:328},S),children:[(0,t.jsxs)(ce.A,(0,l.Z)((0,l.Z)({isKeyPressSubmit:!0},d),{},{submitter:b,children:[c,K]})),j?(0,t.jsx)("div",{className:o("main-other"),style:z,children:j}):null]})]}))}var H=e(5966),W=e(22270),ge=e(84567),pe=e(90789),V=e(60506),xe=["options","fieldProps","proFieldProps","valueEnum"],Se=f.forwardRef(function(r,a){var s=r.options,c=r.fieldProps,S=r.proFieldProps,g=r.valueEnum,p=(0,U.Z)(r,xe);return(0,t.jsx)(V.Z,(0,l.Z)({ref:a,valueType:"checkbox",valueEnum:(0,W.h)(g,void 0),fieldProps:(0,l.Z)({options:s},c),lightProps:(0,l.Z)({labelFormatter:function(){return(0,t.jsx)(V.Z,(0,l.Z)({ref:a,valueType:"checkbox",mode:"read",valueEnum:(0,W.h)(g,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,l.Z)({options:s},c),proFieldProps:S},p))}},p.lightProps),proFieldProps:S},p))}),Fe=f.forwardRef(function(r,a){var s=r.fieldProps,c=r.children;return(0,t.jsx)(ge.Z,(0,l.Z)((0,l.Z)({ref:a},s),{},{children:c}))}),Ce=(0,pe.G)(Fe,{valuePropName:"checked"}),G=Ce;G.Group=Se;var ye=G,Z=e(76772),A=e(2453),je=e(67610),$=e(73935),Ee=e(91094),Pe=function(){var a,s=(0,Z.useModel)("@@initialState"),c=s.initialState,S=s.setInitialState,g=c==null||(a=c.settings)===null||a===void 0?void 0:a.isDark,p=(0,f.useState)({}),j=O()(p,2),K=j[0],X=j[1],z=(0,f.useState)(!1),d=O()(z,2),T=d[0],b=d[1],R=function(o,i){localStorage.setItem("saved_account",o),localStorage.setItem("saved_password",i)},F=function(){localStorage.removeItem("saved_account"),localStorage.removeItem("saved_password")},D=function(){var h=I()(y()().mark(function o(i){var v,u,x,m;return y()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,v=(0,Ee.sha3_256)(i.password||""),i.password=v,n.next=5,(0,B.n$)(i);case 5:if(u=n.sent,!u.error){n.next=12;break}return A.ZP.error("\u7528\u6237\u540D\u6216\u5BC6\u7801\u9519\u8BEF"),i.account===localStorage.getItem("saved_account")&&F(),n.abrupt("return");case 12:return localStorage.setItem("auth_token",u.auth_token?u.auth_token:""),document.cookie="auth_token=".concat(u.auth_token),i.autoLogin?R(i.account||"",v):F(),n.next=17,(0,B.ts)();case 17:return x=n.sent,(0,$.flushSync)(function(){S(function(C){return P()(P()({},C),{},{currentUser:x})})}),A.ZP.success("\u767B\u5F55\u6210\u529F"),m=new URL(window.location.href).searchParams,Z.history.push(m.get("redirect")||"/"),n.abrupt("return");case 23:n.next=27;break;case 25:n.prev=25,n.t0=n.catch(0);case 27:case"end":return n.stop()}},o,null,[[0,25]])}));return function(i){return h.apply(this,arguments)}}(),M=function(){var h=I()(y()().mark(function o(){var i,v,u,x,m;return y()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=localStorage.getItem("saved_account"),v=localStorage.getItem("saved_password"),!(i&&v)){n.next=25;break}return n.prev=3,n.next=6,(0,B.n$)({account:i,password:v});case 6:if(u=n.sent,u.message&&A.ZP.success(u.message),!u.error){n.next=11;break}return F(),n.abrupt("return");case 11:return localStorage.setItem("auth_token",u.auth_token?u.auth_token:""),document.cookie="auth_token=".concat(u.auth_token),n.next=15,(0,B.ts)();case 15:x=n.sent,(0,$.flushSync)(function(){S(function(C){return P()(P()({},C),{},{currentUser:x})})}),A.ZP.success("\u81EA\u52A8\u767B\u5F55\u6210\u529F"),m=new URL(window.location.href).searchParams,Z.history.push(m.get("redirect")||"/"),n.next=25;break;case 22:n.prev=22,n.t0=n.catch(3),F();case 25:case"end":return n.stop()}},o,null,[[3,22]])}));return function(){return h.apply(this,arguments)}}();return(0,f.useEffect)(function(){M()},[]),(0,t.jsxs)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:1e3,background:g?"#1f1f1f":"#f5f5f5"},children:[(0,t.jsx)(Z.Helmet,{children:(0,t.jsxs)("title",{children:["\u767B\u5F55"," - ",je.Z.title]})}),(0,t.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,t.jsxs)(me,{contentStyle:{minWidth:280,maxWidth:"75vw"},logo:(0,t.jsx)("img",{alt:"logo",src:"/icons/icon-192x192.png"}),title:"Eridanus WebUI",subTitle:"\u8BF7\u767B\u5F55",onFinish:function(){var h=I()(y()().mark(function o(i){return y()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,D(i);case 2:case"end":return u.stop()}},o)}));return function(o){return h.apply(this,arguments)}}(),children:[(0,t.jsx)(H.Z,{name:"account",fieldProps:{size:"large",prefix:(0,t.jsx)(N.Z,{})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}]}),(0,t.jsx)(H.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,t.jsx)(ue,{})},placeholder:"\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"}]}),(0,t.jsx)(ye,{name:"autoLogin",noStyle:!0,children:"\u81EA\u52A8\u767B\u5F55"}),(0,t.jsx)("a",{style:{float:"right",marginBottom:"20px"},onClick:function(){return b(!0)},children:"\u4E0D\u77E5\u9053/\u5FD8\u8BB0\u8D26\u6237\u5BC6\u7801\uFF1F"}),(0,t.jsxs)(ee.Z,{title:"\u8D26\u6237\u5BC6\u7801\u5E2E\u52A9",open:T,onCancel:function(){return b(!1)},footer:null,centered:!0,children:[(0,t.jsx)("hr",{}),(0,t.jsxs)("p",{children:["\u5982\u679C\u60A8\u662F\u7B2C\u4E00\u6B21\u4F7F\u7528\uFF0C\u9ED8\u8BA4\u8D26\u6237\u5BC6\u7801\u5747\u4E3A\uFF1A",(0,t.jsx)("h1",{style:{textAlign:"center"},children:"eridanus"})]}),(0,t.jsx)("hr",{}),(0,t.jsxs)("p",{children:["\u5982\u679C\u60A8\u5FD8\u8BB0\u4E86\u8D26\u6237\u548C\u5BC6\u7801\uFF0C\u8BF7\u5728",(0,t.jsx)("strong",{style:{fontSize:"1.5rem"},children:" Eridanus "}),"\u76EE\u5F55\u4E0B\uFF0C\u627E\u5230",(0,t.jsx)("strong",{style:{fontSize:"1.5rem"},children:" user_info.yaml "}),"\u6587\u4EF6\uFF0C\u5C06\u5176\u5220\u9664\u3002\u7136\u540E\u91CD\u542F\u670D\u52A1\u7AEF\uFF0C\u8D26\u6237\u5BC6\u7801\u6062\u590D\u4E3A\u9ED8\u8BA4\u3002"]}),(0,t.jsx)("hr",{}),(0,t.jsxs)("p",{children:["\u5982\u679C\u60A8\u6709\u516C\u7F51\u8BBF\u95EE\u7684\u9700\u8981\uFF0C\u4E3A\u4E86\u5B89\u5168\u8D77\u89C1\uFF0C\u8BF7\u52A1\u5FC5\u5728\u767B\u5F55\u540E\uFF0C\u627E\u5230\u9876\u90E8\u5DE5\u5177\u680F\u53F3\u4E0A\u89D2\u7684"," ",(0,t.jsx)(N.Z,{style:{fontSize:"2rem"}})," \u6309\u94AE\uFF0C\u7ACB\u5373\u4FEE\u6539\u8D26\u6237\u5BC6\u7801\uFF01"]})]})]})})]})},Be=Pe}}]);
