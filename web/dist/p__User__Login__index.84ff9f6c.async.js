"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[366],{42110:function(Q,I){var e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"};I.Z=e},1977:function(Q,I,e){e.d(I,{n:function(){return V}});var U=e(97685),x=e(71002),W=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,j=function(r){return r==="*"||r==="x"||r==="X"},z=function(r){var s=parseInt(r,10);return isNaN(s)?r:s},T=function(r,s){return(0,x.Z)(r)!==(0,x.Z)(s)?[String(r),String(s)]:[r,s]},w=function(r,s){if(j(r)||j(s))return 0;var d=T(z(r),z(s)),g=(0,U.Z)(d,2),F=g[0],L=g[1];return F>L?1:F<L?-1:0},k=function(r,s){for(var d=0;d<Math.max(r.length,s.length);d++){var g=w(r[d]||"0",s[d]||"0");if(g!==0)return g}return 0},B=function(r){var s,d=r.match(W);return d==null||(s=d.shift)===null||s===void 0||s.call(d),d},V=function(r,s){var d=B(r),g=B(s),F=d.pop(),L=g.pop(),H=k(d,g);return H!==0?H:F||L?F?-1:1:0}},1485:function(Q,I,e){e.r(I),e.d(I,{default:function(){return Ze}});var U=e(15009),x=e.n(U),W=e(97857),j=e.n(W),z=e(99289),T=e.n(z),w=e(5574),k=e.n(w),B=e(2618),V=e(17788),S=e(87547),r=e(67294),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},d=s,g=e(57079);function F(){return F=Object.assign?Object.assign.bind():function(a){for(var u=1;u<arguments.length;u++){var i=arguments[u];for(var h in i)Object.prototype.hasOwnProperty.call(i,h)&&(a[h]=i[h])}return a},F.apply(this,arguments)}const L=(a,u)=>r.createElement(g.Z,F({},a,{ref:u,icon:d}));var oe=r.forwardRef(L),v=e(1413),q=e(91),se=e(89451),ie=e(21532),le=e(93967),ce=e.n(le),de=e(34994),G=e(4942),ve=e(64847),he=function(u){return(0,G.Z)((0,G.Z)({},u.componentCls,{"&-container":{display:"flex",flex:"1",flexDirection:"column",height:"100%",paddingInline:32,paddingBlock:24,overflow:"auto",background:"inherit"},"&-top":{textAlign:"center"},"&-header":{display:"flex",alignItems:"center",justifyContent:"center",height:"44px",lineHeight:"44px",a:{textDecoration:"none"}},"&-title":{position:"relative",insetBlockStart:"2px",color:"@heading-color",fontWeight:"600",fontSize:"33px"},"&-logo":{width:"44px",height:"44px",marginInlineEnd:"16px",verticalAlign:"top",img:{width:"100%"}},"&-desc":{marginBlockStart:"12px",marginBlockEnd:"40px",color:u.colorTextSecondary,fontSize:u.fontSize},"&-main":{minWidth:"328px",maxWidth:"580px",margin:"0 auto","&-other":{marginBlockStart:"24px",lineHeight:"22px",textAlign:"start"}}}),"@media (min-width: @screen-md-min)",(0,G.Z)({},"".concat(u.componentCls,"-container"),{paddingInline:0,paddingBlockStart:32,paddingBlockEnd:24,backgroundRepeat:"no-repeat",backgroundPosition:"center 110px",backgroundSize:"100%"}))};function fe(a){return(0,ve.Xj)("LoginForm",function(u){var i=(0,v.Z)((0,v.Z)({},u),{},{componentCls:".".concat(a)});return[he(i)]})}var t=e(85893),me=["logo","message","contentStyle","title","subTitle","actions","children","containerStyle","otherStyle"];function ge(a){var u,i=a.logo,h=a.message,Z=a.contentStyle,C=a.title,E=a.subTitle,b=a.actions,ae=a.children,ue=a.containerStyle,$=a.otherStyle,f=(0,q.Z)(a,me),K=(0,se.YB)(),O=f.submitter===!1?!1:(0,v.Z)((0,v.Z)({searchConfig:{submitText:K.getMessage("loginForm.submitText","\u767B\u5F55")}},f.submitter),{},{submitButtonProps:(0,v.Z)({size:"large",style:{width:"100%"}},(u=f.submitter)===null||u===void 0?void 0:u.submitButtonProps),render:function(o,P){var y,J=P.pop();if(typeof(f==null||(y=f.submitter)===null||y===void 0?void 0:y.render)=="function"){var n,D;return f==null||(n=f.submitter)===null||n===void 0||(D=n.render)===null||D===void 0?void 0:D.call(n,o,P)}return J}}),X=(0,r.useContext)(ie.ZP.ConfigContext),A=X.getPrefixCls("pro-form-login"),N=fe(A),Y=N.wrapSSR,m=N.hashId,l=function(o){return"".concat(A,"-").concat(o," ").concat(m)},c=(0,r.useMemo)(function(){return i?typeof i=="string"?(0,t.jsx)("img",{src:i}):i:null},[i]);return Y((0,t.jsxs)("div",{className:ce()(l("container"),m),style:ue,children:[(0,t.jsxs)("div",{className:"".concat(l("top")," ").concat(m).trim(),children:[C||c?(0,t.jsxs)("div",{className:"".concat(l("header")),children:[c?(0,t.jsx)("span",{className:l("logo"),children:c}):null,C?(0,t.jsx)("span",{className:l("title"),children:C}):null]}):null,E?(0,t.jsx)("div",{className:l("desc"),children:E}):null]}),(0,t.jsxs)("div",{className:l("main"),style:(0,v.Z)({width:328},Z),children:[(0,t.jsxs)(de.A,(0,v.Z)((0,v.Z)({isKeyPressSubmit:!0},f),{},{submitter:O,children:[h,ae]})),b?(0,t.jsx)("div",{className:l("main-other"),style:$,children:b}):null]})]}))}var _=e(5966),ee=e(22270),pe=e(84567),xe=e(90789),te=e(79211),Se=["options","fieldProps","proFieldProps","valueEnum"],Fe=r.forwardRef(function(a,u){var i=a.options,h=a.fieldProps,Z=a.proFieldProps,C=a.valueEnum,E=(0,q.Z)(a,Se);return(0,t.jsx)(te.Z,(0,v.Z)({ref:u,valueType:"checkbox",valueEnum:(0,ee.h)(C,void 0),fieldProps:(0,v.Z)({options:i},h),lightProps:(0,v.Z)({labelFormatter:function(){return(0,t.jsx)(te.Z,(0,v.Z)({ref:u,valueType:"checkbox",mode:"read",valueEnum:(0,ee.h)(C,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,v.Z)({options:i},h),proFieldProps:Z},E))}},E.lightProps),proFieldProps:Z},E))}),ye=r.forwardRef(function(a,u){var i=a.fieldProps,h=a.children;return(0,t.jsx)(pe.Z,(0,v.Z)((0,v.Z)({ref:u},i),{},{children:h}))}),Ce=(0,xe.G)(ye,{valuePropName:"checked"}),ne=Ce;ne.Group=Fe;var Ee=ne,M=e(76772),R=e(2453),Pe=e(67610),re=e(73935),je=e(91094),Be=function(){var u,i=(0,M.useModel)("@@initialState"),h=i.initialState,Z=i.setInitialState,C=h==null||(u=h.settings)===null||u===void 0?void 0:u.isDark,E=(0,r.useState)({}),b=k()(E,2),ae=b[0],ue=b[1],$=(0,r.useState)(!1),f=k()($,2),K=f[0],O=f[1],X=function(l,c){localStorage.setItem("saved_account",l),localStorage.setItem("saved_password",c)},A=function(){localStorage.removeItem("saved_account"),localStorage.removeItem("saved_password")},N=function(){var m=T()(x()().mark(function l(c){var p,o,P,y;return x()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,p=(0,je.sha3_256)(c.password||""),c.password=p,n.next=5,(0,B.n$)(c);case 5:if(o=n.sent,!o.error){n.next=12;break}return R.ZP.error("\u7528\u6237\u540D\u6216\u5BC6\u7801\u9519\u8BEF"),c.account===localStorage.getItem("saved_account")&&A(),n.abrupt("return");case 12:return localStorage.setItem("auth_token",o.auth_token?o.auth_token:""),document.cookie="auth_token=".concat(o.auth_token),c.autoLogin?X(c.account||"",p):A(),n.next=17,(0,B.ts)();case 17:return P=n.sent,(0,re.flushSync)(function(){Z(function(D){return j()(j()({},D),{},{currentUser:P})})}),R.ZP.success("\u767B\u5F55\u6210\u529F"),y=new URL(window.location.href).searchParams,M.history.push(y.get("redirect")||"/"),n.abrupt("return");case 23:n.next=27;break;case 25:n.prev=25,n.t0=n.catch(0);case 27:case"end":return n.stop()}},l,null,[[0,25]])}));return function(c){return m.apply(this,arguments)}}(),Y=function(){var m=T()(x()().mark(function l(){var c,p,o,P,y;return x()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(c=localStorage.getItem("saved_account"),p=localStorage.getItem("saved_password"),!(c&&p)){n.next=25;break}return n.prev=3,n.next=6,(0,B.n$)({account:c,password:p});case 6:if(o=n.sent,o.message&&R.ZP.success(o.message),!o.error){n.next=11;break}return A(),n.abrupt("return");case 11:return localStorage.setItem("auth_token",o.auth_token?o.auth_token:""),document.cookie="auth_token=".concat(o.auth_token),n.next=15,(0,B.ts)();case 15:P=n.sent,(0,re.flushSync)(function(){Z(function(D){return j()(j()({},D),{},{currentUser:P})})}),R.ZP.success("\u81EA\u52A8\u767B\u5F55\u6210\u529F"),y=new URL(window.location.href).searchParams,M.history.push(y.get("redirect")||"/"),n.next=25;break;case 22:n.prev=22,n.t0=n.catch(3),A();case 25:case"end":return n.stop()}},l,null,[[3,22]])}));return function(){return m.apply(this,arguments)}}();return(0,r.useEffect)(function(){Y()},[]),(0,t.jsxs)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:1e3,background:C?"#1f1f1f":"#f5f5f5"},children:[(0,t.jsx)(M.Helmet,{children:(0,t.jsxs)("title",{children:["\u767B\u5F55"," - ",Pe.Z.title]})}),(0,t.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,t.jsxs)(ge,{contentStyle:{minWidth:280,maxWidth:"75vw"},logo:(0,t.jsx)("img",{alt:"logo",src:"/icons/icon-192x192.png"}),title:"Eridanus WebUI",subTitle:"\u8BF7\u767B\u5F55",onFinish:function(){var m=T()(x()().mark(function l(c){return x()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,N(c);case 2:case"end":return o.stop()}},l)}));return function(l){return m.apply(this,arguments)}}(),children:[(0,t.jsx)(_.Z,{name:"account",fieldProps:{size:"large",prefix:(0,t.jsx)(S.Z,{})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}]}),(0,t.jsx)(_.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,t.jsx)(oe,{})},placeholder:"\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"}]}),(0,t.jsx)(Ee,{name:"autoLogin",noStyle:!0,children:"\u81EA\u52A8\u767B\u5F55"}),(0,t.jsx)("a",{style:{float:"right",marginBottom:"20px"},onClick:function(){return O(!0)},children:"\u4E0D\u77E5\u9053/\u5FD8\u8BB0\u8D26\u6237\u5BC6\u7801\uFF1F"}),(0,t.jsxs)(V.Z,{title:"\u8D26\u6237\u5BC6\u7801\u5E2E\u52A9",open:K,onCancel:function(){return O(!1)},footer:null,centered:!0,children:[(0,t.jsx)("hr",{}),(0,t.jsxs)("p",{children:["\u5982\u679C\u60A8\u662F\u7B2C\u4E00\u6B21\u4F7F\u7528\uFF0C\u9ED8\u8BA4\u8D26\u6237\u5BC6\u7801\u5747\u4E3A\uFF1A",(0,t.jsx)("h1",{style:{textAlign:"center"},children:"eridanus"})]}),(0,t.jsx)("hr",{}),(0,t.jsxs)("p",{children:["\u5982\u679C\u60A8\u5FD8\u8BB0\u4E86\u8D26\u6237\u548C\u5BC6\u7801\uFF0C\u8BF7\u5728",(0,t.jsx)("strong",{style:{fontSize:"1.5rem"},children:" Eridanus "}),"\u76EE\u5F55\u4E0B\uFF0C\u627E\u5230",(0,t.jsx)("strong",{style:{fontSize:"1.5rem"},children:" user_info.yaml "}),"\u6587\u4EF6\uFF0C\u5C06\u5176\u5220\u9664\u3002\u7136\u540E\u91CD\u542F\u670D\u52A1\u7AEF\uFF0C\u8D26\u6237\u5BC6\u7801\u6062\u590D\u4E3A\u9ED8\u8BA4\u3002"]}),(0,t.jsx)("hr",{}),(0,t.jsxs)("p",{children:["\u5982\u679C\u60A8\u6709\u516C\u7F51\u8BBF\u95EE\u7684\u9700\u8981\uFF0C\u4E3A\u4E86\u5B89\u5168\u8D77\u89C1\uFF0C\u8BF7\u52A1\u5FC5\u5728\u767B\u5F55\u540E\uFF0C\u627E\u5230\u9876\u90E8\u5DE5\u5177\u680F\u53F3\u4E0A\u89D2\u7684"," ",(0,t.jsx)(S.Z,{style:{fontSize:"2rem"}})," \u6309\u94AE\uFF0C\u7ACB\u5373\u4FEE\u6539\u8D26\u6237\u5BC6\u7801\uFF01"]})]})]})})]})},Ze=Be}}]);
