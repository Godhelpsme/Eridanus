"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[366],{2067:function(y,P,e){e.r(P);var O=e(15009),i=e.n(O),v=e(97857),E=e.n(v),b=e(99289),m=e.n(b),p=e(5574),U=e.n(p),L=e(2618),I=e(87547),j=e(94149),W=e(84713),D=e(38480),u=e(76772),c=e(2453),C=e(67610),h=e(67294),T=e(73935),Z=e(91094),w=e.n(Z),s=e(85893),R=function(){var d,M=(0,u.useModel)("@@initialState"),l=M.initialState,A=M.setInitialState,B=l==null||(d=l.settings)===null||d===void 0?void 0:d.isDark,K=(0,h.useState)({}),f=U()(K,2),z=f[0],G=f[1],S=function(){var o=m()(i()().mark(function t(r){var a,n,g;return i()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,r.password=(0,Z.sha3_256)(r.password||""),_.next=4,(0,L.n$)(r);case 4:if(a=_.sent,!a.error){_.next=10;break}return c.ZP.error("\u7528\u6237\u540D\u6216\u5BC6\u7801\u9519\u8BEF"),_.abrupt("return");case 10:return localStorage.setItem("auth_token",a.auth_token?a.auth_token:""),document.cookie="auth_token=".concat(a.auth_token),_.next=14,(0,L.ts)();case 14:return n=_.sent,(0,T.flushSync)(function(){A(function(x){return E()(E()({},x),{},{currentUser:n})})}),c.ZP.success("\u767B\u5F55\u6210\u529F"),g=new URL(window.location.href).searchParams,u.history.push(g.get("redirect")||"/"),_.abrupt("return");case 20:_.next=24;break;case 22:_.prev=22,_.t0=_.catch(0);case 24:case"end":return _.stop()}},t,null,[[0,22]])}));return function(r){return o.apply(this,arguments)}}();return(0,h.useEffect)(function(){},[]),(0,s.jsxs)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:1e3,background:B?"#1f1f1f":"#f5f5f5"},children:[(0,s.jsx)(u.Helmet,{children:(0,s.jsxs)("title",{children:["\u767B\u5F55"," - ",C.Z.title]})}),(0,s.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,s.jsxs)(W.U,{contentStyle:{minWidth:280,maxWidth:"75vw"},logo:(0,s.jsx)("img",{alt:"logo",src:"/icons/icon-192x192.png"}),title:"Eridanus WebUI",subTitle:"\u8BF7\u767B\u5F55",initialValues:{autoLogin:!0},onFinish:function(){var o=m()(i()().mark(function t(r){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,S(r);case 2:case"end":return n.stop()}},t)}));return function(t){return o.apply(this,arguments)}}(),children:[(0,s.jsx)(D.Z,{name:"account",fieldProps:{size:"large",prefix:(0,s.jsx)(I.Z,{})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}]}),(0,s.jsx)(D.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,s.jsx)(j.Z,{})},placeholder:"\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"}]})]})})]})};P.default=R}}]);
